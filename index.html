<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Feijoada PNZ</title>
    <link href="style.css" rel="stylesheet" type="text/css" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="./favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="./favicon/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
  </head>
  <style>
    @media (min-width: 640px) {
      .sm\:h-60 {
        height: 15rem;
      }
    }

    .w-full {
      width: 100%;
    }

    .object-center {
      object-position: center;
    }

    .object-cover {
      object-fit: cover;
    }

    .h-40 {
      height: 15rem;
    }

    .logo-div {
      text-align: center;
      width: 150px;
      height: 150px;
      margin-top: -8%;
      padding: 1%;
      background: white;
      border-radius: 100px;
    }

    .logo-div img {
      width: 100%;
      border-radius: 100px;
    }

    .section-logo {
      display: flex;
      flex-direction: column;
      align-items: center;
      border-radius: 9px 9px 0px 0px;
      margin-top: -3%;
      background: #e6e6e6;
      position: relative;
    }

    .name {
      font-weight: 700;
      font-family: sans-serif;
      font-size: 1.45rem;
    }

    .body {
      background-color: #e6e6e6;
      padding: 1%;
    }

    .h-spam {
      font-weight: 600;
    }

    .frete {
      margin: 4%;
      background: white;
      box-shadow: 0px 0px 2px;
      padding: 20px;
      display: flex;
      justify-content: space-between;
    }

    .local-icon {
      width: 25px;
    }

    p {
      margin: 0px;
    }

    .dropdown-item {
      font-size: large;
      display: flex;
      flex-direction: row;
    }

    i {
      margin: 15px;
      font-size: xx-large;
      opacity: 50%;
    }

    .bi{
      margin: 5px;
    }

    .categorias img, .bebidas img, .pratos img {
      width: 130px;
      border-radius: 10px;
    }

    .categorias, .bebidas, .pratos{
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin: 10px;
      background: white;
      box-shadow: 0px 0px 3px;
      border-radius: 15px;
      transition: 0.2s;
      cursor: pointer;
      padding: 2%;
    }

    .categorias:hover{
      box-shadow: 0px 0px 5px;
    }


    @media(max-width: 600px){
      .categorias img, .bebidas img, .pratos img {
        width: 100px;
      }
    }

        a{
          text-decoration: none;
          color: black;
        }

  </style>

  <body>
    <section classs="section-banner">
      <div>
        <img
          src="./images/feijoada banner.png"
          class="object-cover object-center w-full h-40 bg-white sm:h-60"
        />
      </div>
    </section>
    <section
      class="section-logo"
      data-bs-toggle="modal"
      data-bs-target="#exampleModal"
    >
      >
      <div class="logo-div">
        <img
          src="./images/feijoada logo.png"
          alt="Logo da empresa - Feijoada pnz"
          class="bg-gray-100 object-cover object-center w-full h-full block"
        />
      </div>
      <p class="name">Feijoada PNZ</p>
      <p><i class="bi bi-geo-alt-fill"></i> Petrolina</p>
      <p class="h-spam"></p>
      <b style="cursor: pointer;">‚óèMais informa√ß√µes</b>
    </section>

    <!-- Modal -->
    <div
      class="modal fade"
      id="exampleModal"
      tabindex="-1"
      aria-labelledby="exampleModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5" id="exampleModalLabel">
              Feijoada pnz
            </h1>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <div
              style="display: flex; flex-direction: column; align-items: center"
            >
              <img
                src="./images/feijoada logo.png"
                style="width: 100px"
                alt=""
              />
              <p>Feijoada pnz</p>
            </div>
            <div
              style="
                display: flex;
                flex-direction: column;
                justify-content: flex-start;
              "
            >
              RESTAURANTE EM PETROLINA üçõüòâ; DELIVERY DE MARMITAS E
              REFRIGERANTES, TUDO ISSO COM ENTREGA R√ÅPIDA, VELOCIDADE,
              QUALIDADE, HIGIENE E SEGURAN√áA ALIMENTAR!
              <br />
              <br />
              <a
                href="https://www.instagram.com/feijoada_pnz"
                style="text-decoration: none; color: black"
                ><i class="bi bi-instagram"></i> @feijoada_pnz</a
              >
              <br />
              <p style="font-weight: 600">contato</p>
              <div>
                <a
                  href="https://api.whatsapp.com/send?phone=5587988084604"
                  style="text-decoration: none; color: black"
                >
                  <div
                    style="
                      border: 2px solid black;
                      border-radius: 8px;
                      width: 100%;
                      display: flex;
                      align-items: center;
                    "
                  >
                    <i class="bi bi-whatsapp"></i> (XX) XXXXX-XXXX
                  </div>
                </a>
                <a
                  href="tel:(XX) XXXXXXXXX"
                  style="text-decoration: none; color: black"
                >
                  <div
                    style="
                      border: 2px solid black;
                      border-radius: 8px;
                      width: 100%;
                      display: flex;
                      align-items: center;
                    "
                  >
                    <i class="bi bi-telephone-fill"></i> (XX) XXXXX-XXXX
                  </div>
                </a>
                <br />
                <p>Endere√ßo</p>
                <br />
                <p>Avenida da Integra√ß√£o, 98 - Gercino Coelho</p>
                <p>Petrolina - PE</p>
                <p>CEP: 56306-150</p>
                <p>CNPJ: 57.694.334/0001-20</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <section class="body">
      <div
        class="frete dropdown"
        role="button"
        data-bs-toggle="dropdown"
        aria-expanded="false"
      >
        <div style="display: flex; flex-direction: row; align-items: center">
          <svg
            class="local-icon"
            focusable="false"
            viewBox="0 0 24 24"
            aria-hidden="true"
          >
            <path
              d="M12.01 16c-.27 0-.52-.1-.71-.29-.2-.2-.29-.43-.29-.71-.01-.55.43-.99.98-1h.02c.28 0 .51.1.71.29.18.19.28.43.28.7s-.1.51-.29.71-.43.3-.7.3zm-.88-3.66c0-.45.1-.84.29-1.16.19-.33.53-.7 1-1.12.28-.25.48-.47.61-.66s.19-.4.19-.64c0-.29-.11-.53-.32-.74-.21-.2-.5-.3-.85-.3-.37 0-.74.1-.96.3-.21.2-.4.45-.4.98H9c0-1.01.46-1.73.97-2.21C10.53 6.28 11.25 6 12 6c.59 0 1.11.12 1.57.35s.79.55 1.05.96.38.86.38 1.35-.1.9-.31 1.25-.48.71-.89 1.09c-.32.3-.53.56-.65.77s-.18.49-.18.81V13h-1.85v-.66h.01zM18 10.2C18 6.57 15.35 4 12 4s-6 2.57-6 6.2c0 2.34 1.95 5.44 6 9.14 4.05-3.7 6-6.8 6-9.14zM12 2c4.2 0 8 3.22 8 8.2 0 3.32-2.67 7.25-8 11.8-5.33-4.55-8-8.48-8-11.8C4 5.22 7.8 2 12 2z"
            ></path>
          </svg>
          <p style="margin: 0px">calcular taxa e tempo de entrega</p>
        </div>
        <div>
          <i class="bi bi-chevron-right"></i>
        </div>

        <ul class="dropdown-menu">
          <p>Como voc√™ quer receber o seu pedido?</p>
          <li>
            <a class="dropdown-item" href="#" style="font-size: large">
              <div>
                <i class="bi bi-bicycle"></i>
              </div>
              <div><b>Entrega</b><br />A gente leva at√© voc√™</div>
            </a>
          </li>
          <a class="dropdown-item" href="#" style="font-size: large">
            <div>
              <i class="bi bi-person-walking"></i>
            </div>
            <div><b>Entrega</b><br />A gente leva at√© voc√™</div>
          </a>
        </ul>
      </div>

      <script>

        var dia = new Date().getDay(); // Obt√©m o dia da semana (0 = domingo, 6 = s√°bado)
        var hora = new Date().getHours();
        var min = new Date().getMinutes();
        var mensagem = "";
        
        // Verifica se √© s√°bado ou domingo e se est√° no hor√°rio de funcionamento
        if (
          (dia === 0 || dia === 6) && // Verifica se √© domingo (0) ou s√°bado (6)
          (hora > 10 || (hora === 10 && min >= 30)) &&
          (hora < 15 || (hora === 15 && min <= 30))
        ) {
          mensagem = "Aberto at√© as 15:30";
          $(".h-spam").css("color", "#10b981");
        } else {
          mensagem = "Fechado - Abrimos as 10:30";
          $(".h-spam").css("color", "red");
        }

        $(".h-spam").html(mensagem);

      </script>

        <div>
          <h2>Nossos pratos</h2>
        </div>
        <div>
        
        <div id="dadosContainer">
          
        </div>

        <script>
          let totalFinal = 0;
          let produtosEscolhidos = []; // Array para armazenar os produtos escolhidos

                async function exibirDados() {
                  const dadosContainer = document.getElementById('dadosContainer');
                  const dados = await carregarDadosJson();

                  if (dados && Array.isArray(dados)) {
                    // Filtra os itens para identificar o √∫ltimo prato
                    const pratos = dados.filter(item => item.tipo === 'prato');
                    const ultimoPrato = pratos[pratos.length - 1];

                    dados.forEach(item => {
                      // Criando uma vers√£o segura do nome do prato para IDs e classes
                      const pratoId = item.prato.replace(/\s+/g, '-').toLowerCase();

                      // Criando elementos HTML para exibir cada propriedade
                      const itemDiv = document.createElement('div');
                      itemDiv.innerHTML = `
                        <div class="pratos" style="flex-direction: column-reverse;">
                          <div style="display: flex; flex-direction: column; align-items: center; width: 100%;">
                            <div id="prato-${pratoId}" style="display: flex; align-items: flex-start; font-size: 12px; width: 100%; justify-content: space-between;">
                              <div>
                                <p><b>${item.prato}</b></p>
                                <p>${item.descricao}</p><br>
                                <p><b>Pre√ßo: <l>R$${item.preco}</l></b></p><br>
                              </div>
                              <div>
                                <img src="${item.imagem}" alt="${item.prato}" />
                              </div>
                            </div>

                            <div class="info info-${pratoId}" style="display: none;">
                              <div style="display: flex; flex-direction: column; align-items: center;">
                                Algum coment√°rio?
                                <textarea id="coment-${pratoId}" style="max-height: 130px; margin: 1%; border: 2px solid gray; border-radius: 10px; width: 100%;" cols="30" rows="10"></textarea>
                              </div>
                              <div style="display: flex; justify-content: space-evenly; align-items: center;">
                                <button class="btn" onclick="alterarQuantidade('${pratoId}', -1, ${item.preco}, '${item.prato}')"><h2>-</h2></button>
                                <p id="qtd-${pratoId}">0</p>
                                <button class="btn" onclick="alterarQuantidade('${pratoId}', 1, ${item.preco}, '${item.prato}')"><h2>+</h2></button>
                                <p>Total: R$ <span id="total-${pratoId}">0,00</span></p>
                              </div>
                            </div>
                          </div>
                        </div>
                      `;

                      dadosContainer.appendChild(itemDiv);

                      // Se o item atual √© o √∫ltimo prato, insere a div "Bebidas"
                      if (item === ultimoPrato) {
                        const bebidasDiv = document.createElement('div');
                        bebidasDiv.innerHTML = `<h2>Bebidas</h2>`;
                        dadosContainer.appendChild(bebidasDiv);
                      }

                      // Adicionando a fun√ß√£o de clique para mostrar/ocultar a se√ß√£o de informa√ß√µes
                      document.getElementById(`prato-${pratoId}`).addEventListener('click', function() {
                        const infoDiv = document.querySelector(`.info-${pratoId}`);
                        infoDiv.style.display = (infoDiv.style.display === 'none') ? 'block' : 'none';
                      });
                    });
                  } else {
                    dadosContainer.innerHTML = '<p>Erro ao carregar os dados.</p>';
                  }
                }
          // Fun√ß√£o para alterar a quantidade e calcular o total
          function alterarQuantidade(pratoId, quantidade, preco, prato) {
            const qtdElement = document.getElementById(`qtd-${pratoId}`);
            let qtd = parseInt(qtdElement.innerText) + quantidade;

            if (qtd < 0) qtd = 0;

            qtdElement.innerText = qtd;

            const total = qtd * preco;
            document.getElementById(`total-${pratoId}`).innerText = total.toFixed(2).replace('.', ',');

            if (qtd > 0 && !produtosEscolhidos.find(item => item.prato === prato)) {
              produtosEscolhidos.push({ prato, qtd, total });
            } else if (qtd === 0) {
              produtosEscolhidos = produtosEscolhidos.filter(item => item.prato !== prato);
            } else {
              produtosEscolhidos = produtosEscolhidos.map(item => item.prato === prato ? { ...item, qtd, total } : item);
            }

            atualizaCarrinho();
            exibirTabelaProdutosEscolhidos();
          }

          // Fun√ß√£o para atualizar o total geral do carrinho
          function atualizaCarrinho() {
            totalFinal = 0;

            document.querySelectorAll('[id^="total-"]').forEach(item => {
              const valor = parseFloat(item.innerText.replace(',', '.'));
              totalFinal += valor;
            });

            document.getElementById('total').innerText = totalFinal.toFixed(2).replace('.', ',');
          }

          // Fun√ß√£o para exibir a tabela com produtos escolhidos
          function exibirTabelaProdutosEscolhidos() {
            const tabelaContainer = document.getElementById('tabelaProdutos');
            tabelaContainer.innerHTML = '';

            if (produtosEscolhidos.length === 0) {
              tabelaContainer.innerHTML = '<p>Nenhum produto adicionado.</p>';
              return;
            }

            let tabelaHtml = `
              <table>
                <tr>
                  <th>Produto</th>
                  <th>Quantidade</th>
                  <th>Total (R$)</th>
                </tr>
            `;

            produtosEscolhidos.forEach(item => {
              tabelaHtml += `
                <tr>
                  <td>${item.prato}</td>
                  <td>${item.qtd}</td>
                  <td>${item.total.toFixed(2).replace('.', ',')}</td>
                </tr>
              `;
            });

            tabelaHtml += '</table>';
            tabelaContainer.innerHTML = tabelaHtml;
          }

          // Fun√ß√£o para carregar o JSON
          async function carregarDadosJson() {
            try {
              const response = await fetch('pratos.json');
              if (!response.ok) throw new Error('Erro ao carregar o JSON');
              const dados = await response.json();
              return dados;
            } catch (error) {
              console.error('Erro:', error);
            }
          }

          // Exibe os dados ao carregar a p√°gina
          exibirDados();
          
        </script>

        <div class="fixed-div" style="position: fixed;
          bottom: 10px; /* Dist√¢ncia da parte inferior da tela */
          right: 10px;  /* Dist√¢ncia da borda direita */
          padding: 2%;
          background-color: #333;
          color: #fff;
          border-radius: 5px;" data-bs-toggle="modal" data-bs-target="#modalCarrinho">
          <i class="bi bi-cart-fill" style="opacity: 100%;"></i><p id="total"></p>
        </div>

        <!-- Modal Carrinho -->
        <div class="modal fade" id="modalCarrinho" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h1 class="modal-title fs-5" id="exampleModalLabel">Carrinho</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">

                <div id="tabelaProdutos"></div>

              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary">Save changes</button>
              </div>
            </div>
          </div>
        </div>
      </body>
  <script src="script.js"></script>
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
  />
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"
  ></script>
</html>
